Vue.mixin({data:()=>({windowWidth:window.innerWidth}),computed:{windowWidthPixels(){return this.windowWidth}},mounted(){window.addEventListener("resize",this.updateWindowWidth),console.log("myVueObj",myVueObj)},beforeDestroy(){window.removeEventListener("resize",this.updateWindowWidth)},methods:{updateWindowWidth(){this.windowWidth=window.innerWidth}}});const initialCartCount=void 0!==window.cartCount?parseInt(window.cartCount):0;new Vue({el:"#app",data:{navopen:!1,mobileMenuOpen:!1,cartQuantity:initialCartCount,selectedCategories:[],sortOrder:"newest",shopProducts:"undefined"!=typeof shopProducts?shopProducts:[],showMobileFilter:!1,showMobileFilterCategorys:!0,showMobileFilterSort:!1},computed:{showMobileFilterCategorysMobile(){return this.showMobileFilterCategorys&&this.windowWidth<768||this.windowWidth>768},showMobileFilterSortMobile(){return this.showMobileFilterSort&&this.windowWidth<768||this.windowWidth>768},showFilters(){return this.windowWidth>768||this.showMobileFilter},isMobile(){return this.windowWidth<=768},filteredProducts(){let t=[...this.shopProducts];if(this.selectedCategories.length>0){const e=this.selectedCategories.map(t=>t.slug);t=t.filter(t=>e.includes(t.category_slug))}switch(this.sortOrder){case"newest":t.sort((t,e)=>new Date(e.date)-new Date(t.date));break;case"oldest":t.sort((t,e)=>new Date(t.date)-new Date(e.date));break;case"price-low":t.sort((t,e)=>t.price-e.price);break;case"price-high":t.sort((t,e)=>e.price-t.price)}return t},cartHasItems(){return this.cartQuantity>0}},methods:{createInlineStyles(){let t=document.querySelectorAll(".inline-style"),e=document.createElement("style");e.type="text/css",document.body.appendChild(e);for(let r=0;r<t.length;r++){let o=t[r].getAttribute("data-style");e.innerHTML+=o}},async addToCart(t){try{const e=new URLSearchParams;e.append("action","add_to_cart");for(let r in t)t.hasOwnProperty(r)&&e.append(r,t[r]);const r=await fetch(myVueObj.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),o=await r.json();return console.log("Add to cart response:",o),o.success&&(this.cartQuantity=this.calculateCartQuantity(o.data),this.updateMenuCartDisplay()),o}catch(t){return console.error("Add to cart error:",t),{success:!1,error:t}}},async updateCartQuantity(t){try{const e=new URLSearchParams;e.append("action","update_cart_quantity");for(let r in t)t.hasOwnProperty(r)&&e.append(r,t[r]);const r=await fetch(myVueObj.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),o=await r.json();return console.log("Update cart response:",o),o.success&&(this.cartQuantity=this.calculateCartQuantity(o.data),this.updateMenuCartDisplay()),o}catch(t){return console.error("Update cart error:",t),{success:!1,error:t}}},async removeFromCart(t){try{const e=new URLSearchParams;e.append("action","remove_from_cart");for(let r in t)t.hasOwnProperty(r)&&e.append(r,t[r]);const r=await fetch(myVueObj.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),o=await r.json();return console.log("Remove from cart response:",o),o.success&&(this.cartQuantity=this.calculateCartQuantity(o.data),this.updateMenuCartDisplay()),o}catch(t){return console.error("Remove from cart error:",t),{success:!1,error:t}}},async getCartCount(){try{const t=await fetch(myVueObj.ajaxUrl+"?action=get_cart_count"),e=await t.json();return console.log("Get cart count response:",e),e.success&&(this.cartQuantity=this.calculateCartQuantity(e.data),this.updateMenuCartDisplay()),e}catch(t){return console.error("Get cart count error:",t),{success:!1,error:t}}},async refreshCartCount(){try{const t=await fetch(myVueObj.ajaxUrl+"?action=get_cart_count"),e=await t.json();return console.log("Refresh cart count response:",e),e.success&&(this.cartQuantity=this.calculateCartQuantity(e.data),window.cartCount=this.cartQuantity,this.updateMenuCartDisplay(),this.$forceUpdate()),e}catch(t){return console.error("Failed to refresh cart count:",t),{success:!1,error:t}}},calculateCartQuantity:t=>t?(console.log("Calculating cart quantity for:",t),Object.values(t).reduce((t,e)=>{let r=0;return"number"==typeof e?r=e:"object"==typeof e&&null!==e?r=e.quantity||e.qty||0:"string"==typeof e&&(r=parseInt(e,10)||0),t+r},0)):0,updateMenuCartDisplay(){const t=document.querySelectorAll(".menu-item a");for(let e=0;e<t.length;e++)-1!==t[e].textContent.indexOf("Cart")&&(t[e].textContent=`ðŸ›’ Cart (${this.cartQuantity})`)},toggleCategory(t){-1===this.selectedCategories.findIndex(e=>e.slug===t.slug)?this.selectedCategories.push(t):this.removeCategory(t.slug)},removeCategory(t){this.selectedCategories=this.selectedCategories.filter(e=>e.slug!==t)},clearAllCategories(){this.selectedCategories=[]},isCategorySelected(t){return this.selectedCategories.some(e=>e.slug===t)},setSortOrder(t){this.sortOrder=t},toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen;const t=document.getElementById("navbar-sticky");t&&(this.mobileMenuOpen?t.classList.remove("hidden"):t.classList.add("hidden"))},closeMobileMenuOnLink(){this.isMobile&&this.mobileMenuOpen&&this.toggleMobileMenu()}},mounted(){window.addEventListener("resize",this.updateWindowWidth),console.log("myVueObj",myVueObj),this.refreshCartCount();const t=document.querySelector('[data-collapse-toggle="navbar-sticky"]');t&&t.addEventListener("click",this.toggleMobileMenu);document.querySelectorAll("#navbar-sticky a").forEach(t=>{t.addEventListener("click",this.closeMobileMenuOnLink)})}});